# ============================================================================ #
#
#
#
# ---------------------------------------------------------------------------- #

CAT ?= cat
RM  ?= rm -f

# ---------------------------------------------------------------------------- #



# ---------------------------------------------------------------------------- #

GENERATED_FILES += rules.json.hh flake.nix.in.hh


# ---------------------------------------------------------------------------- #

.PHONY: all
all: $(GENERATED_FILES)


# ---------------------------------------------------------------------------- #

rules.json.hh: rules.json
	echo 'R"_JSON(' > $@;
	$(CAT) $< >> $@;
	echo ')_JSON"' >> $@;


# ---------------------------------------------------------------------------- #

flake.nix.in.hh: flake.nix.in
	echo 'R"_NIX(' > $@;
	$(CAT) $< >> $@;
	echo ')_NIX"' >> $@;


# ---------------------------------------------------------------------------- #

CLEANFILES = $(GENERATED_FILES)

.PHONY: clean

clean:
	-$(RM) $(CLEANFILES)


# ---------------------------------------------------------------------------- #
#
#
#
# ============================================================================ #
